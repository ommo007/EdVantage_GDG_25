import{c as m,j as e,B as O,r as t,u as P,a as G,b as J,L as _}from"./index-CGocrW-2.js";import{c as A}from"./index-DAE5hqnr.js";import{A as B}from"./arrow-right-D8fzX6aS.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],R=m("EyeOff",D);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],q=m("Eye",U);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],N=m("LoaderCircle",H),I=()=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(O,{className:"h-6 w-6 text-white"}),e.jsxs("div",{className:"text-2xl font-bold text-indigo-200",children:["Edva",e.jsx("span",{className:"text-purple-300",children:"ntage"})]})]});function $(){return e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 z-0"})}const u=A("https://fsztxvlitgukjqrxabmg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZzenR4dmxpdGd1a2pxcnhhYm1nIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM0MjE4NTAsImV4cCI6MjA1ODk5Nzg1MH0.dR4UHKsT5Wj67e3iJ_VaC5OjJq99O8rv_bUxEfverDw"),K=()=>{var y;const[i,k]=t.useState(""),[n,C]=t.useState(""),[V,W]=t.useState("student"),[l,z]=t.useState(!1),[x,g]=t.useState(!1),[h,f]=t.useState(!1),[p,a]=t.useState(""),[E,b]=t.useState(!1),{currentUser:j,userRole:o}=P(),r=G(),c=((y=J().state)==null?void 0:y.from)||`/${o||"student"}`;t.useEffect(()=>{j&&o&&(console.log(`User already logged in with role ${o}, redirecting to:`,c),r(c))},[j,o,r,c]);const S=async s=>{if(s.preventDefault(),a(""),!i||!n){a("Please fill in all fields");return}g(!0);try{const{data:d,error:w}=await u.auth.signInWithPassword({email:i,password:n});if(w)throw w;const F=d.user.id,{data:M,error:v}=await u.from("profiles").select("role").eq("user_id",F).single();if(v)throw v;switch(M.role){case"admin":r("/admin",{replace:!0});break;case"instructor":r("/instructor",{replace:!0});break;case"student":r("/student",{replace:!0});break;default:a("Unknown role. Please contact support.");break}}catch(d){console.error("Login error:",d),a("Invalid email, password, or role.")}finally{g(!1)}},L=async()=>{a(""),f(!0);try{const{error:s}=await u.auth.signInWithOAuth({provider:"google"});if(s)throw s;console.log("Google sign-in initiated successfully.")}catch(s){console.error("Google sign-in error:",s),a("Failed to sign in with Google. Please try again.")}finally{f(!1)}};return e.jsxs("div",{className:"min-h-screen relative flex items-center justify-center py-4",children:[e.jsx($,{}),e.jsx("div",{className:"absolute inset-0 z-0 bg-white/50 backdrop-blur-sm"}),e.jsxs("div",{className:"relative z-10 grid md:grid-cols-2 w-full max-w-4xl bg-white rounded-2xl shadow-2xl overflow-hidden mx-4",children:[e.jsx("div",{className:"hidden md:flex flex-col justify-between bg-gradient-to-br from-indigo-600 to-indigo-800 p-10 text-white",children:e.jsxs("div",{children:[e.jsx(I,{light:!0}),e.jsx("h1",{className:"text-3xl font-bold mt-12",children:"Welcome back!"}),e.jsx("p",{className:"mt-3 text-indigo-100",children:"Continue your learning journey and explore new educational content."}),e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx("img",{src:"/login.svg",alt:"Learning Illustration",className:"w-64 h-auto"})})]})}),e.jsxs("div",{className:`p-8 md:p-12 transition-all duration-300 ${E?"bg-white":"bg-gray-50"}`,children:[e.jsx("div",{className:"md:hidden mb-6",children:e.jsx(I,{})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Sign in to your account"}),e.jsx("button",{type:"button",onClick:L,disabled:h,className:"w-full flex items-center justify-center gap-2 py-3 px-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-300 disabled:opacity-50 mb-6",children:h?e.jsx(N,{className:"h-5 w-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),e.jsx("span",{className:"text-gray-700 font-medium",children:"Continue with Google"})]})}),e.jsxs("div",{className:"relative flex items-center justify-center my-8",children:[e.jsx("div",{className:"border-t border-gray-300 absolute w-full"}),e.jsx("div",{className:"bg-white px-4 relative z-10 text-sm text-gray-500",children:"or continue with Institute Credentials"})]}),p&&e.jsx("div",{className:"mb-6 p-3 bg-red-50 border border-red-200 text-red-600 rounded-lg text-sm animate-fadeIn",children:p}),e.jsxs("form",{onSubmit:S,onFocus:()=>b(!0),onBlur:()=>b(!1),children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),e.jsx("input",{type:"email",id:"email",value:i,onChange:s=>k(s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300",placeholder:"your@email.com",required:!0})]}),e.jsxs("div",{className:"mb-5",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("label",{htmlFor:"password",className:"block text-gray-700 font-medium text-sm",children:"Password"}),e.jsx(_,{to:"/forgot-password",className:"text-sm text-indigo-600 hover:text-indigo-800 transition-colors duration-300",children:"Forgot password?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:l?"text":"password",id:"password",value:n,onChange:s=>C(s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300",placeholder:"••••••••",required:!0}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",onClick:()=>z(!l),children:l?e.jsx(R,{size:18}):e.jsx(q,{size:18})})]})]}),e.jsx("button",{type:"submit",disabled:x,className:"w-full flex items-center justify-center py-3 px-4 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:x?e.jsxs("span",{className:"flex items-center",children:[e.jsx(N,{className:"animate-spin mr-2 h-5 w-5"}),"Signing in..."]}):e.jsxs("span",{className:"flex items-center font-medium",children:["Sign In ",e.jsx(B,{className:"ml-2 w-4 h-4"})]})})]})]})]})]})};export{K as default};
