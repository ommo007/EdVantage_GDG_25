import{e as O,a as q,r,j as e,L as b,B as j,S as z}from"./index-CGocrW-2.js";import{D as G}from"./DashboardHeader-B5PeDfLb.js";import{S as u}from"./StatCard-dJ9OuqKE.js";import{S as K}from"./SearchBar-Duk7gwUO.js";import{C as R,P as N,U as w,E as H}from"./user-plus-eemFAc1d.js";import{L as y}from"./layers-Bbb5VIqM.js";import{U as D}from"./users-D5Ca1YqY.js";import{S as J}from"./school-CGv6AAsJ.js";import{T as V}from"./trash-CoJ6NNyc.js";import"./x-CKoSI4A3.js";const F={1:{id:1,name:"Jr. KG",totalStudents:50,totalTeachers:3},2:{id:2,name:"Sr. KG",totalStudents:55,totalTeachers:3},3:{id:3,name:"1st Standard",totalStudents:60,totalTeachers:4},4:{id:4,name:"2nd Standard",totalStudents:65,totalTeachers:4},5:{id:5,name:"3rd Standard",totalStudents:70,totalTeachers:4},6:{id:6,name:"4th Standard",totalStudents:75,totalTeachers:4},7:{id:7,name:"5th Standard",totalStudents:80,totalTeachers:4},8:{id:8,name:"6th Standard",totalStudents:85,totalTeachers:4},9:{id:9,name:"7th Standard",totalStudents:90,totalTeachers:5},10:{id:10,name:"8th Standard",totalStudents:95,totalTeachers:5},11:{id:11,name:"9th Standard",totalStudents:100,totalTeachers:5},12:{id:12,name:"10th Standard",totalStudents:110,totalTeachers:6}},l={1:[{id:1,name:"Division A",students:25,teachers:2,courses:6,status:"active"},{id:2,name:"Division B",students:25,teachers:1,courses:6,status:"active"}],2:[{id:3,name:"Division A",students:28,teachers:2,courses:6,status:"active"},{id:4,name:"Division B",students:27,teachers:1,courses:6,status:"active"}],3:[{id:5,name:"Division A",students:30,teachers:2,courses:7,status:"active"},{id:6,name:"Division B",students:30,teachers:1,courses:7,status:"active"}],4:[{id:7,name:"Division A",students:32,teachers:2,courses:8,status:"active"},{id:8,name:"Division B",students:33,teachers:1,courses:8,status:"active"}],5:[{id:9,name:"Division A",students:35,teachers:2,courses:9,status:"active"},{id:10,name:"Division B",students:35,teachers:1,courses:9,status:"active"}],6:[{id:11,name:"Division A",students:38,teachers:2,courses:10,status:"active"},{id:12,name:"Division B",students:37,teachers:1,courses:10,status:"active"}],7:[{id:13,name:"Division A",students:40,teachers:2,courses:11,status:"active"},{id:14,name:"Division B",students:40,teachers:1,courses:11,status:"active"}],8:[{id:15,name:"Division A",students:42,teachers:2,courses:12,status:"active"},{id:16,name:"Division B",students:43,teachers:1,courses:12,status:"active"}],9:[{id:17,name:"Division A",students:45,teachers:2,courses:13,status:"active"},{id:18,name:"Division B",students:44,teachers:1,courses:13,status:"active"}],10:[{id:19,name:"Division A",students:48,teachers:2,courses:14,status:"active"},{id:20,name:"Division B",students:47,teachers:1,courses:14,status:"active"}],11:[{id:21,name:"Division A",students:50,teachers:2,courses:15,status:"active"},{id:22,name:"Division B",students:50,teachers:1,courses:15,status:"active"}],12:[{id:23,name:"Division A",students:55,teachers:3,courses:16,status:"active"},{id:24,name:"Division B",students:55,teachers:2,courses:16,status:"active"}]},ae=()=>{const{standardId:n}=O(),x=q(),[h,S]=r.useState(""),[g,C]=r.useState(null),[a,m]=r.useState([]),[k,v]=r.useState(!0),[p,T]=r.useState(null),[A,o]=r.useState(!1),[i,d]=r.useState({id:null,name:"",students:null,teachers:null,courses:null});r.useEffect(()=>{B()},[n]);const B=async()=>{try{v(!0),await new Promise(c=>setTimeout(c,1e3));const s=F[n],t=l[n]||[];if(!s){x("/admin");return}C(s),m(t)}catch(s){console.error("Error fetching standard data:",s)}finally{v(!1)}},E=s=>{T(p===s?null:s)},L=()=>{if(!i.name.trim()){alert("Division name is required.");return}const s={id:a.length>0?Math.max(...a.map(t=>t.id))+1:1,name:i.name,students:i.students||0,teachers:i.teachers||0,courses:i.courses||0,status:"active"};m([...a,s]),l[n]||(l[n]=[]),l[n].push(s),d({id:null,name:"",students:null,teachers:null,courses:null}),o(!1)},M=s=>{const t=a.find(c=>c.id===s);t&&(d(t),o(!0))},P=s=>{window.confirm("Are you sure you want to delete this division?")&&m(a.filter(t=>t.id!==s))},U=s=>{const t=a.find(c=>c.id===s);console.log("Navigating to division:",t),t?x(`/admin/${n}/divisions/${s}`,{state:{division:t}}):alert("Division not found.")},f=a.filter(s=>s.name.toLowerCase().includes(h.toLowerCase())),I=a.reduce((s,t)=>s+t.students,0),$=a.reduce((s,t)=>s+t.teachers,0);return k||!g?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-white flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 to-white",children:[e.jsx(G,{userRole:"admin"}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{to:"/admin",className:"mr-4 text-indigo-600 hover:text-indigo-800",children:e.jsx(R,{className:"h-6 w-6"})}),e.jsx("h1",{className:"text-3xl font-bold text-indigo-900",children:g.name})]}),e.jsx("p",{className:"text-indigo-600 mt-2 ml-10",children:"Manage divisions, students and teachers"})]}),e.jsxs("div",{className:"flex items-center mt-4 md:mt-0",children:[e.jsx(K,{placeholder:"Search divisions...",value:h,onChange:S}),e.jsxs("button",{onClick:()=>o(!0),className:"ml-4 bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition duration-300 font-medium flex items-center",children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),"Create Division"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(u,{icon:e.jsx(y,{className:"h-6 w-6 text-indigo-600"}),title:"Total Divisions",value:a.length,bgColor:"bg-indigo-100",textColor:"text-indigo-700"}),e.jsx(u,{icon:e.jsx(D,{className:"h-6 w-6 text-purple-600"}),title:"Total Students",value:I,bgColor:"bg-purple-100",textColor:"text-purple-700"}),e.jsx(u,{icon:e.jsx(w,{className:"h-6 w-6 text-blue-600"}),title:"Assigned Teachers",value:$,bgColor:"bg-blue-100",textColor:"text-blue-700"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-indigo-100 p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(J,{className:"h-6 w-6 text-indigo-600 mr-3"}),e.jsx("h2",{className:"text-xl font-bold text-indigo-900",children:"Divisions"})]}),f.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-indigo-400 mb-4",children:e.jsx(y,{className:"h-12 w-12 mx-auto"})}),e.jsx("h3",{className:"text-xl font-medium text-indigo-800 mb-2",children:"No divisions found"}),e.jsx("p",{className:"text-indigo-600 mb-6",children:"Start by creating divisions for this standard"}),e.jsxs("button",{onClick:()=>o(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition duration-300 font-medium inline-flex items-center",children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),"Create Division"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-indigo-100",children:[e.jsx("thead",{className:"bg-indigo-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-indigo-500 uppercase tracking-wider",children:"Division Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-indigo-500 uppercase tracking-wider",children:"Students"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-indigo-500 uppercase tracking-wider",children:"Teachers"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-indigo-500 uppercase tracking-wider",children:"Courses"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-indigo-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-indigo-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-indigo-100",children:f.map(s=>e.jsxs("tr",{className:"hover:bg-indigo-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(b,{to:`/admin/${n}/divisions/${s.id}`,className:"text-indigo-900 font-medium hover:text-indigo-700",children:s.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-indigo-600",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{className:"h-4 w-4 mr-2 text-indigo-500"}),s.students]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-indigo-600",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"h-4 w-4 mr-2 text-indigo-500"}),s.teachers]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-indigo-600",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(j,{className:"h-4 w-4 mr-2 text-indigo-500"}),s.courses]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full",children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium relative",children:[e.jsx("button",{onClick:()=>E(s.id),className:"text-indigo-600 hover:text-indigo-900 focus:outline-none",children:e.jsx(H,{className:"h-5 w-5"})}),p===s.id&&e.jsxs("div",{className:"absolute right-8 mt-0 w-48 bg-white rounded-lg shadow-lg py-1 z-50 border border-indigo-100",children:[e.jsxs("button",{onClick:()=>U(s.id),className:"block w-full text-left px-4 py-2 text-sm text-indigo-700 hover:bg-indigo-50",children:[e.jsx(j,{className:"inline-block w-4 h-4 mr-2"}),"Manage Division"]}),e.jsxs("button",{onClick:()=>M(s.id),className:"block w-full text-left px-4 py-2 text-sm text-indigo-700 hover:bg-indigo-50",children:[e.jsx(z,{className:"inline-block w-4 h-4 mr-2"}),"Edit Division"]}),e.jsxs("button",{onClick:()=>P(s.id),className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[e.jsx(V,{className:"inline-block w-4 h-4 mr-2"}),"Delete Division"]})]})]})]},s.id))})]})})]})]}),A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-96",children:[e.jsx("h2",{className:"text-xl font-bold text-indigo-900 mb-4",children:i.id?"Edit Division":"Create Division"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Division Name"}),e.jsx("input",{type:"text",value:i.name,onChange:s=>d({...i,name:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Students"}),e.jsx("input",{type:"number",value:i.students,onChange:s=>d({...i,students:parseInt(s.target.value,10)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Teachers"}),e.jsx("input",{type:"number",value:i.teachers,onChange:s=>d({...i,teachers:parseInt(s.target.value,10)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Courses"}),e.jsx("input",{type:"number",value:i.courses,onChange:s=>d({...i,courses:parseInt(s.target.value,10)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{onClick:()=>o(!1),className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-md mr-2 hover:bg-gray-400",children:"Cancel"}),e.jsx("button",{onClick:L,className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700",children:i.id?"Save Changes":"Create"})]})]})})]})};export{ae as default};
