import{u as f,a as m,b as x,r as u,j as o}from"./index-CGocrW-2.js";const h=["admin","teacher","student"],g=s=>h.includes(s),R=()=>"student",j=()=>{const{currentUser:s,userRole:t,authRedirect:i}=f(),c=m(),l=x(),[n,a]=u.useState(!1);return u.useEffect(()=>{if(console.log("AuthRedirect: User role detected:",t),n)return;(()=>{var d;if(!s){console.log("No authenticated user, redirecting to login"),c("/login",{replace:!0}),a(!0);return}let e="/login";if(i)e=i,console.log(`Using explicit authRedirect: ${e}`);else if((d=l.state)!=null&&d.from)e=l.state.from,console.log(`Using location state path: ${e}`);else if(t)g(t)?(e=`/${t}`,console.log(`Using role-based path for ${t}: ${e}`)):(console.warn(`Invalid role detected: ${t}, using default role`),e=`/${R()}`);else{const r=localStorage.getItem("userRole");r&&g(r)&&(e=`/${r}`,console.log(`Using localStorage role: ${r}`))}console.log(`Executing redirect to: ${e}`),c(e,{replace:!0}),a(!0)})()},[s,t,i,l.state,c,n]),o.jsx("div",{className:"flex items-center justify-center h-screen bg-indigo-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),o.jsx("p",{className:"mt-4 text-indigo-600",children:"Redirecting to your dashboard..."}),o.jsx("p",{className:"text-sm text-indigo-400 mt-2",children:t?`Detected role: ${t}`:"Verifying your account..."})]})})};export{j as default};
